[1mdiff --git a/RFIX/Selection_Test.html b/RFIX/Selection_Test.html[m
[1mindex 0d1b773..83bbf83 100644[m
[1m--- a/RFIX/Selection_Test.html[m
[1m+++ b/RFIX/Selection_Test.html[m
[36m@@ -150,7 +150,7 @@[m
       if (step > 0 && ACAPI?.DistributeNow) {[m
         const payload = "step:" + step;[m
         AddLog("[UI] Step OK ‚Üí " + payload);[m
[31m-        ACAPI.DistributeNow(payload).then(ok => setInfo("info-dist", ok ? "‚úî –†–∞–∑–ª–æ–∂–µ–Ω–æ –ø–æ —à–∞–≥—É" : "‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∏"));[m
[32m+[m[32m        ACAPI.DistributeNow(payload).then(ok => setInfo("info-dist", ok ? " –†–∞–∑–ª–æ–∂–µ–Ω–æ –ø–æ —à–∞–≥—É" : " –û—à–∏–±–∫–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∏"));[m
       } else if (step <= 0) setInfo("info-dist", "–®–∞–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0");[m
     }[m
     function SetDistributionCount () {[m
[36m@@ -160,7 +160,7 @@[m
       if (count > 0 && ACAPI?.DistributeNow) {[m
         const payload = "count:" + count;[m
         AddLog("[UI] Count OK ‚Üí " + payload);[m
[31m-        ACAPI.DistributeNow(payload).then(ok => setInfo("info-dist", ok ? "‚úî –†–∞–∑–ª–æ–∂–µ–Ω–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É" : "‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∏"));[m
[32m+[m[32m        ACAPI.DistributeNow(payload).then(ok => setInfo("info-dist", ok ? " –†–∞–∑–ª–æ–∂–µ–Ω–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É" : " –û—à–∏–±–∫–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∏"));[m
       } else if (count <= 0) setInfo("info-dist", "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â• 1");[m
     }[m
     function CreateSlabAlongCurve(){[m
[36m@@ -186,7 +186,7 @@[m
       if (!A) { AddLog('[Markup] ACAPI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'); return; }[m
       if (!A.SetMarkupStep || !A.CreateMarkupDimensions) {[m
         AddLog('[Markup] API —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã');[m
[31m-        setInfo('info-markup', '‚ùå –§—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–æ–±–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω)');[m
[32m+[m[32m        setInfo('info-markup', ' –§—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–æ–±–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω)');[m
         return;[m
       }[m
 [m
[36m@@ -207,7 +207,7 @@[m
       Promise.resolve(stepOk).then(ok => {[m
         AddLog('[Markup] SetMarkupStep —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ' + ok);[m
         if (!ok) {[m
[31m-          setInfo('info-markup', '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —à–∞–≥');[m
[32m+[m[32m          setInfo('info-markup', ' –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —à–∞–≥');[m
           return;[m
         }[m
 [m
[36m@@ -215,15 +215,42 @@[m
         return A.CreateMarkupDimensions();[m
       }).then(created => {[m
         if (created) {[m
[31m-          setInfo('info-markup', '‚úî –†–∞–∑–º–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!');[m
[32m+[m[32m          setInfo('info-markup', ' –†–∞–∑–º–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!');[m
           AddLog('[Markup] SUCCESS');[m
         } else {[m
[31m-          setInfo('info-markup', '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É (—Å–º. –ª–æ–≥)');[m
[32m+[m[32m          setInfo('info-markup', ' –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É (—Å–º. –ª–æ–≥)');[m
           AddLog('[Markup] FAILED');[m
         }[m
       }).catch(e => {[m
         AddLog('[Markup] –û—à–∏–±–∫–∞: ' + e);[m
[31m-        setInfo('info-markup', '‚ùå –û—à–∏–±–∫–∞: ' + e);[m
[32m+[m[32m        setInfo('info-markup', ' –û—à–∏–±–∫–∞: ' + e);[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    function CreateDimensionsToLine() {[m
[32m+[m[32m      const A = window.ACAPI;[m
[32m+[m[32m      if (!A) { AddLog('[Dimensions] ACAPI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'); return; }[m
[32m+[m[32m      if (!A.CreateDimensionsToLine) {[m
[32m+[m[32m        AddLog('[Dimensions] API —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');[m
[32m+[m[32m        setInfo('info-markup', ' –§—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–æ–±–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω)');[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      AddLog('[Dimensions] –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤...');[m
[32m+[m[32m      setInfo('info-markup', '–ó–∞–¥–∞–π—Ç–µ –ª–∏–Ω–∏—é –∫–∞—Ä–∞–Ω–¥–∞—à–æ–º (2 —Ç–æ—á–∫–∏)...');[m
[32m+[m
[32m+[m[32m      // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é (–±–ª–æ–∫–∏—Ä—É–µ—Ç UI, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ª–∏–Ω–∏—é)[m
[32m+[m[32m      Promise.resolve(A.CreateDimensionsToLine()).then(created => {[m
[32m+[m[32m        if (created) {[m
[32m+[m[32m          setInfo('info-markup', ' –†–∞–∑–º–µ—Ä—ã –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω—ã!');[m
[32m+[m[32m          AddLog('[Dimensions] SUCCESS');[m
[32m+[m[32m        } else {[m
[32m+[m[32m          setInfo('info-markup', ' –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã (—Å–º. –ª–æ–≥)');[m
[32m+[m[32m          AddLog('[Dimensions] FAILED');[m
[32m+[m[32m        }[m
[32m+[m[32m      }).catch(e => {[m
[32m+[m[32m        AddLog('[Dimensions] –û—à–∏–±–∫–∞: ' + e);[m
[32m+[m[32m        setInfo('info-markup', ' –û—à–∏–±–∫–∞: ' + e);[m
       });[m
     }[m
 [m
[36m@@ -261,7 +288,7 @@[m
           throw new Error('ACAPI.ApplyZDelta –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');[m
         }[m
 [m
[31m-        setInfo('info-ground', applied ? '‚úî –°–º–µ—â–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (' + mm + ' –º–º)' : '‚ùå –û—à–∏–±–∫–∞ —Å–º–µ—â–µ–Ω–∏—è');[m
[32m+[m[32m        setInfo('info-ground', applied ? ' –°–º–µ—â–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (' + mm + ' –º–º)' : ' –û—à–∏–±–∫–∞ —Å–º–µ—â–µ–Ω–∏—è');[m
         AddLog('[ZDelta] Apply ‚Üí ' + applied);[m
         if (applied) UpdateSelectedElements();[m
       } catch (e) {[m
[36m@@ -294,7 +321,7 @@[m
 [m
         const applied = await A.ApplyGroundOffset(0.0); // offset –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ C++[m
         AddLog('[Ground] ApplyGroundOffset(0) ‚Üí ' + applied);[m
[31m-        setInfo('info-ground', applied ? '‚úî –ü—Ä–∏–∑–µ–º–ª–µ–Ω–æ –Ω–∞ Mesh' : '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏—è');[m
[32m+[m[32m        setInfo('info-ground', applied ? ' –ü—Ä–∏–∑–µ–º–ª–µ–Ω–æ –Ω–∞ Mesh' : ' –û—à–∏–±–∫–∞ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏—è');[m
         if (applied) UpdateSelectedElements();[m
       } catch (e) {[m
         AddLog('[Ground] –û—à–∏–±–∫–∞: ' + e);[m
[36m@@ -347,7 +374,13 @@[m
         const el = e.target.closest('[data-help-url]');[m
         if (!el) return;[m
         e.preventDefault();[m
[31m-        const url = el.getAttribute('data-help-url') || 'https://landscape.227.info/help/start';[m
[32m+[m[32m        let url = el.getAttribute('data-help-url') || 'https://landscape.227.info/help/start';[m
[32m+[m[41m        [m
[32m+[m[32m        // –î–æ–±–∞–≤–ª—è–µ–º cache-busting –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –æ–±—Ö–æ–¥–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞[m
[32m+[m[32m        const separator = url.includes('?') ? '&' : '?';[m
[32m+[m[32m        const timestamp = Date.now();[m
[32m+[m[32m        url = url + separator + 'v=' + timestamp;[m
[32m+[m[41m        [m
         AddLog('[UI] help ‚Üí ' + url);[m
 [m
         const A = window.ACAPI;[m
[36m@@ -531,16 +564,36 @@[m
       <div style="text-align:center; margin-top:15px;">[m
         <input type="button" [m
                onclick="CreateMarkup()" [m
[31m-               value="üìè –†–∞–∑–º–µ—Ç–∏—Ç—å"[m
[32m+[m[32m               value="–†–∞–∑–º–µ—Ç–∏—Ç—å"[m
                style="font-size:16px; padding:8px 20px; font-weight:bold;">[m
       </div>[m
 [m
       <div id="info-markup" class="info-box">[m
         –°–æ–∑–¥–∞—ë—Ç —Ä–∞–∑–º–µ—Ä—ã –®–ò–†–ò–ù–´ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é.<br>[m
[32m+[m[32m        –†–∞–∑–º–µ—Ä—ã —Ä–∞—Å—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –°–¢–†–û–ì–û –ü–û –®–ê–ì–£ –æ—Ç –ª–∏–Ω–∏–∏ –¥–æ –±–ª–∏–∂–∞–π—à–µ–π —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—É—Ä–∞.<br>[m
         –õ–∏–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –æ–±—è–∑–∞–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —ç–ª–µ–º–µ–Ω—Ç - –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–±–æ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–¥–æ–ª—å –∑–∞–±–æ—Ä–∞).[m
       </div>[m
     </fieldset>[m
 [m
[32m+[m[32m    <fieldset class="control-block">[m
[32m+[m[32m      <legend>–ü—Ä–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –¥–æ –ª–∏–Ω–∏–∏</legend>[m
[32m+[m
[32m+[m[32m      <div style="text-align:center; margin-bottom:10px;">[m
[32m+[m[32m        <p style="font-size:12px; color:#666;">[m
[32m+[m[32m          1. –í—ã–¥–µ–ª–∏—Ç–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ–ª–æ–Ω–Ω—ã –∏–ª–∏ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∏<br>[m
[32m+[m[32m          2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ <b>2 —Ç–æ—á–∫–∏</b> –¥–ª—è –ª–∏–Ω–∏–∏<br>[m
[32m+[m[32m          3. –†–∞–∑–º–µ—Ä—ã –ø–æ—è–≤—è—Ç—Å—è –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –ª–∏–Ω–∏–∏ –æ—Ç —Ç–æ—á–µ–∫ –ø—Ä–∏–≤—è–∑–∫–∏[m
[32m+[m[32m        </p>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div style="text-align:center; margin-top:15px;">[m
[32m+[m[32m        <input type="button"[m[41m [m
[32m+[m[32m               onclick="CreateDimensionsToLine()"[m[41m [m
[32m+[m[32m               value="–ü—Ä–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã"[m
[32m+[m[32m               style="font-size:16px; padding:8px 20px; font-weight:bold;">[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </fieldset>[m
[32m+[m
     <button class="tab-help"[m
             data-help-url="https://landscape.227.info/help/markup?embed=1"[m
             data-help-title="–°–ø—Ä–∞–≤–∫–∞: –†–∞–∑–º–µ—Ç–∫–∞">–ü–æ–º–æ—â—å</button>[m
[1mdiff --git a/Src/BrowserRepl.cpp b/Src/BrowserRepl.cpp[m
[1mindex 07f4f51..abdf1d6 100644[m
[1m--- a/Src/BrowserRepl.cpp[m
[1m+++ b/Src/BrowserRepl.cpp[m
[36m@@ -393,6 +393,11 @@[m [mvoid BrowserRepl::RegisterACAPIJavaScriptObject()[m
 		return new JS::Value(MarkupHelper::CreateMarkupDimensions());[m
 		}));[m
 [m
[32m+[m	[32mjsACAPI->AddItem(new JS::Function("CreateDimensionsToLine", [](GS::Ref<JS::Base>) {[m
[32m+[m		[32mif (BrowserRepl::HasInstance()) BrowserRepl::GetInstance().LogToBrowser("[JS] CreateDimensionsToLine()");[m
[32m+[m		[32mreturn new JS::Value(MarkupHelper::CreateDimensionsToLine());[m
[32m+[m		[32m}));[m
[32m+[m
 	// --- Register object in the browser ---[m
 	browser.RegisterAsynchJSObject(jsACAPI);[m
 	LogToBrowser("[C++] JS bridge registered");[m
[1mdiff --git a/Src/BuildHelper.cpp b/Src/BuildHelper.cpp[m
[1mindex 731839e..5bedeea 100644[m
[1m--- a/Src/BuildHelper.cpp[m
[1m+++ b/Src/BuildHelper.cpp[m
[36m@@ -15,9 +15,9 @@[m [mnamespace BuildHelper {[m
 	// ---------- Utils ----------[m
 	static inline void Log(const GS::UniString& msg)[m
 	{[m
[31m-		if (BrowserRepl::HasInstance())[m
[31m-			BrowserRepl::GetInstance().LogToBrowser("[Build] " + msg);[m
[31m-		ACAPI_WriteReport("%s", false, msg.ToCStr().Get());[m
[32m+[m		[32m// if (BrowserRepl::HasInstance())[m
[32m+[m		[32m//	BrowserRepl::GetInstance().LogToBrowser("[Build] " + msg);[m
[32m+[m		[32m// ACAPI_WriteReport("%s", false, msg.ToCStr().Get());[m
 	}[m
 [m
 	static inline bool GuidIsValid(const API_Guid& g) { return !(g == APINULLGuid); }[m
[1mdiff --git a/Src/GDLHelper.cpp b/Src/GDLHelper.cpp[m
[1mindex 4d7ab24..7d46101 100644[m
[1m--- a/Src/GDLHelper.cpp[m
[1m+++ b/Src/GDLHelper.cpp[m
[36m@@ -24,7 +24,7 @@[m [mnamespace GDLHelper {[m
 [m
 	static void Log(const GS::UniString& s)[m
 	{[m
[31m-		if (BrowserRepl::HasInstance()) BrowserRepl::GetInstance().LogToBrowser(s);[m
[32m+[m		[32m// if (BrowserRepl::HasInstance()) BrowserRepl::GetInstance().LogToBrowser(s);[m
 	}[m
 [m
 	static void AppendFormat(GS::UniString& dst, const char* fmt, ...)[m
[1mdiff --git a/Src/GroundHelper.cpp b/Src/GroundHelper.cpp[m
[1mindex cd72cfb..e4c722a 100644[m
[1m--- a/Src/GroundHelper.cpp[m
[1m+++ b/Src/GroundHelper.cpp[m
[36m@@ -34,13 +34,13 @@[m [mstatic GS::Array<API_Guid> g_objectGuids;[m
 // ------------------ Logging ------------------[m
 static inline void Log(const char* fmt, ...)[m
 {[m
[31m-    va_list vl; va_start(vl, fmt);[m
[31m-    char buf[4096]; vsnprintf(buf, sizeof(buf), fmt, vl);[m
[31m-    va_end(vl);[m
[31m-    GS::UniString s(buf);[m
[31m-    if (BrowserRepl::HasInstance())[m
[31m-        BrowserRepl::GetInstance().LogToBrowser(s);[m
[31m-    ACAPI_WriteReport("%s", false, s.ToCStr().Get());[m
[32m+[m[32m    // va_list vl; va_start(vl, fmt);[m
[32m+[m[32m    // char buf[4096]; vsnprintf(buf, sizeof(buf), fmt, vl);[m
[32m+[m[32m    // va_end(vl);[m
[32m+[m[32m    // GS::UniString s(buf);[m
[32m+[m[32m    // if (BrowserRepl::HasInstance())[m
[32m+[m[32m    //     BrowserRepl::GetInstance().LogToBrowser(s);[m
[32m+[m[32m    // ACAPI_WriteReport("%s", false, s.ToCStr().Get());[m
 }[m
 [m
 // ================================================================[m
[1mdiff --git a/Src/LandscapeHelper.cpp b/Src/LandscapeHelper.cpp[m
[1mindex 1a9dad2..bd51462 100644[m
[1m--- a/Src/LandscapeHelper.cpp[m
[1m+++ b/Src/LandscapeHelper.cpp[m
[36m@@ -20,12 +20,12 @@[m [mnamespace LandscapeHelper {[m
 	static int       g_count = 1;[m
 [m
 	static inline void LogA(const char* s) {[m
[31m-		if (BrowserRepl::HasInstance())[m
[31m-			BrowserRepl::GetInstance().LogToBrowser(GS::UniString(s));[m
[32m+[m		[32m// if (BrowserRepl::HasInstance())[m
[32m+[m		[32m//	BrowserRepl::GetInstance().LogToBrowser(GS::UniString(s));[m
 	}[m
 	static inline void Log(const GS::UniString& s) {[m
[31m-		if (BrowserRepl::HasInstance())[m
[31m-			BrowserRepl::GetInstance().LogToBrowser(s);[m
[32m+[m		[32m// if (BrowserRepl::HasInstance())[m
[32m+[m		[32m//	BrowserRepl::GetInstance().LogToBrowser(s);[m
 	}[m
 	static inline double UiStepToMeters(double stepMm) { return stepMm / 1000.0; }[m
 [m
[1mdiff --git a/Src/MarkupHelper.cpp b/Src/MarkupHelper.cpp[m
[1mindex dec269f..a7fb06b 100644[m
[1m--- a/Src/MarkupHelper.cpp[m
[1m+++ b/Src/MarkupHelper.cpp[m
[36m@@ -16,6 +16,11 @@[m
 [m
 namespace MarkupHelper {[m
 [m
[32m+[m	[32m// ============================================================================[m
[32m+[m	[32m// Constants[m
[32m+[m	[32m// ============================================================================[m
[32m+[m	[32mconstexpr double PI = 3.14159265358979323846;[m
[32m+[m
 	// ============================================================================[m
 	// Globals[m
 	// ============================================================================[m
[36m@@ -28,7 +33,7 @@[m [mnamespace MarkupHelper {[m
 	{[m
 		if (BrowserRepl::HasInstance())[m
 			BrowserRepl::GetInstance().LogToBrowser("[Markup] " + msg);[m
[31m-		ACAPI_WriteReport("[Markup] %s", false, msg.ToCStr().Get());[m
[32m+[m		[32m// ACAPI_WriteReport("[Markup] %s", false, msg.ToCStr().Get());[m
 	}[m
 [m
 	// ============================================================================[m
[36m@@ -87,399 +92,489 @@[m [mnamespace MarkupHelper {[m
 		return true;[m
 	}[m
 [m
[32m+[m
 	// ============================================================================[m
[31m-	// –ê–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏—è –¥—É–≥–∏ (–ø–æ API_PolyArc)[m
[32m+[m	[32m// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –∫–æ–Ω—Ç—É—Ä–∞ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ LandscapeHelper)[m
 	// ============================================================================[m
[31m-	static int FindArcRecord(const API_PolyArc* parcs, Int32 nArcs, Int32 begIndex)[m
[31m-	{[m
[31m-		if (parcs == nullptr || nArcs <= 0) return -1;[m
[31m-		for (Int32 i = 0; i < nArcs; ++i)[m
[31m-			if (parcs[i].begIndex == begIndex)[m
[31m-				return (int)i;[m
[31m-		return -1;[m
[31m-	}[m
[32m+[m	[32mstruct ContourSeg {[m
[32m+[m		[32menum Kind { Line, Arc } kind;[m
[32m+[m		[32mVec2 a{}, b{};        // Line: –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü[m
[32m+[m		[32mVec2 c{};             // Arc: —Ü–µ–Ω—Ç—Ä[m
[32m+[m		[32mdouble r = 0.0;       // Arc: —Ä–∞–¥–∏—É—Å[m
[32m+[m		[32mdouble a0 = 0.0;      // Arc: –Ω–∞—á–∞–ª—å–Ω—ã–π —É–≥–æ–ª[m
[32m+[m		[32mdouble a1 = 0.0;      // Arc: –∫–æ–Ω–µ—á–Ω—ã–π —É–≥–æ–ª[m
[32m+[m		[32mdouble L = 0.0;       // –¥–ª–∏–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞[m
[32m+[m	[32m};[m
 [m
[31m-	static void AppendArcApprox(const API_Coord& a, const API_Coord& b, double arcAngle,[m
[31m-		std::vector<Vec2>& out, double segLen = 0.10) // –£–º–µ–Ω—å—à–∏–ª segLen –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏[m
[31m-	{[m
[31m-		Vec2 P0(a), P1(b);[m
[31m-		Vec2 chord = P1 - P0;[m
[31m-		const double L = chord.length();[m
[31m-		if (L < 1e-9 || std::fabs(arcAngle) < 1e-6) { out.emplace_back(P1); return; }[m
[31m-[m
[31m-		// –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è —Ä–∞–¥–∏—É—Å–∞ –¥—É–≥–∏[m
[31m-		const double half = L * 0.5;[m
[31m-		const double sinHalf = std::sin(std::fabs(arcAngle) * 0.5);[m
[31m-		if (sinHalf < 1e-9) { out.emplace_back(P1); return; }[m
[31m-		[m
[31m-		const double R = half / sinHalf;[m
[31m-		const double h = std::sqrt(std::max(R * R - half * half, 0.0));[m
[31m-[m
[31m-		Vec2 dir = chord.normalized();[m
[31m-		Vec2 left = dir.perpendicular();[m
[31m-		int  sgn = (arcAngle > 0.0) ? 1 : -1;[m
[31m-		Vec2 C = (P0 + P1) * 0.5 + left * (double)(-sgn) * h;[m
[31m-[m
[31m-		double a0 = std::atan2(P0.y - C.y, P0.x - C.x);[m
[31m-		// –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É–≥–ª–∞[m
[31m-		int N = std::max(8, (int)std::ceil((std::fabs(arcAngle) * R) / segLen));[m
[31m-		N = std::min(N, 64); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º[m
[31m-		[m
[31m-		for (int i = 1; i <= N; ++i) {[m
[31m-			double ang = a0 + (arcAngle * i) / (double)N;[m
[31m-			out.emplace_back(Vec2(C.x + R * std::cos(ang), C.y + R * std::sin(ang)));[m
[31m-		}[m
[32m+[m	[32m// ============================================================================[m
[32m+[m	[32m// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —É–≥–ª–∞ –∫ –¥–∏–∞–ø–∞–∑–æ–Ω—É [0, 2œÄ)[m
[32m+[m	[32m// ============================================================================[m
[32m+[m	[32mstatic inline double Norm2PI(double a) {[m
[32m+[m		[32mconst double twoPi = 2.0 * PI;[m
[32m+[m		[32mwhile (a < 0.0) a += twoPi;[m
[32m+[m		[32mwhile (a >= twoPi) a -= twoPi;[m
[32m+[m		[32mreturn a;[m
 	}[m
 [m
 	// ============================================================================[m
[31m-	// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ ¬´–æ–±–Ω–æ–≤–∏—Ç—å¬ª –≤–∏–¥ (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö SDK –Ω–µ—Ç —ç—Ç–∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤)[m
[32m+[m	[32m// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ CCW-–¥–µ–ª—å—Ç—ã –º–µ–∂–¥—É —É–≥–ª–∞–º–∏ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ LandscapeHelper)[m
 	// ============================================================================[m
[31m-	static inline void TryRebuildRedraw()[m
[31m-	{[m
[31m-#if defined(APIDo_Rebuild) && defined(APIDo_Redraw)[m
[31m-		ACAPI_Automate(APIDo_Rebuild, nullptr, nullptr);[m
[31m-		ACAPI_Automate(APIDo_Redraw, nullptr, nullptr);[m
[31m-#endif[m
[32m+[m	[32mstatic inline double CCWDelta(double a0, double a1) {[m
[32m+[m		[32ma0 = Norm2PI(a0);[m
[32m+[m		[32ma1 = Norm2PI(a1);[m
[32m+[m		[32mdouble d = a1 - a0;[m
[32m+[m		[32mif (d < 0.0) d += 2.0 * PI;[m
[32m+[m		[32mreturn d; // [0, 2œÄ)[m
 	}[m
 [m
 	// ============================================================================[m
[31m-	// ShapePrims ‚Üí —Å–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç—É—Ä—ã (–±–µ—Ä—ë–º —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –ø–æ –ø–ª–æ—â–∞–¥–∏)[m
[32m+[m	[32m// –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç—É—Ä–∞ –∏–∑ memo —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥—É–≥ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ LandscapeHelper)[m
 	// ============================================================================[m
[31m-	static std::vector<std::vector<Vec2>>* g_shapePolys = nullptr;[m
[31m-[m
[31m-	static GSErrCode __ACENV_CALL ShapePrimsCollector(const API_PrimElement* prim,[m
[31m-		const void* par1, const void* par2, const void* par3)[m
[32m+[m	[32mstatic void BuildContourFromMemo(std::vector<ContourSeg>& out, API_ElementMemo& memo)[m
 	{[m
[31m-		if (g_shapePolys == nullptr || prim == nullptr) return NoError;[m
[31m-[m
[31m-		if (prim->header.typeID == API_PrimPolyID) {[m
[31m-			const API_PrimPoly& info = prim->poly;[m
[31m-			const API_Coord* coords = reinterpret_cast<const API_Coord*>    (par1);[m
[31m-			const Int32* pends = reinterpret_cast<const Int32*>        (par2);[m
[31m-			const API_PolyArc* parcs = reinterpret_cast<const API_PolyArc*>  (par3);[m
[31m-[m
[31m-			if (coords == nullptr